paths:
  /calendar/my-events:
    get:
      summary: Get calendar events for authenticated user
      tags:
        - Calendar
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: startDate
          schema:
            type: string
            format: date-time
          description: Filter start date (ISO format)
          example: "2025-11-01T00:00:00.000Z"
        - in: query
          name: endDate
          schema:
            type: string
            format: date-time
          description: Filter end date (ISO format)
          example: "2025-11-30T23:59:59.999Z"
        - in: query
          name: types
          schema:
            type: string
          description: Comma-separated event types (e.g., guidance_scheduled,seminar_scheduled)
          example: "guidance_scheduled,guidance_completed"
        - in: query
          name: status
          schema:
            type: string
            enum: [scheduled, completed, cancelled]
          description: Event status filter
          example: "scheduled"
      responses:
        200:
          description: Calendar events retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  events:
                    type: array
                    items:
                      $ref: '#/components/schemas/CalendarEvent'
        401:
          description: Unauthorized - Invalid or missing token
        500:
          description: Internal server error

  /calendar/upcoming:
    get:
      summary: Get upcoming events
      tags:
        - Calendar
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: days
          schema:
            type: integer
            default: 7
            minimum: 1
            maximum: 90
          description: Number of days to look ahead
          example: 7
      responses:
        200:
          description: Upcoming events retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  events:
                    type: array
                    items:
                      $ref: '#/components/schemas/CalendarEvent'
        401:
          description: Unauthorized - Invalid or missing token
        500:
          description: Internal server error

  /calendar/statistics:
    get:
      summary: Get event statistics for dashboard
      tags:
        - Calendar
      security:
        - bearerAuth: []
      responses:
        200:
          description: Event statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  statistics:
                    type: object
                    properties:
                      todayEvents:
                        type: integer
                        description: Number of events today
                        example: 3
                      upcomingEvents:
                        type: integer
                        description: Number of upcoming events (next 7 days)
                        example: 8
                      completedThisMonth:
                        type: integer
                        description: Number of completed events this month
                        example: 12
                      pendingActions:
                        type: integer
                        description: Number of events requiring action
                        example: 2
        401:
          description: Unauthorized - Invalid or missing token
        500:
          description: Internal server error

components:
  schemas:
    CalendarEvent:
      type: object
      properties:
        id:
          type: string
          description: Unique event identifier
          example: "guidance-123e4567-e89b-12d3-a456-426614174000"
        title:
          type: string
          description: Event title
          example: "Bimbingan - Dr. John Doe"
        type:
          type: string
          enum:
            - guidance_scheduled
            - guidance_request
            - guidance_rejected
            - thesis_deadline
            - seminar_scheduled
            - defense_scheduled
            - submission_deadline
            - student_guidance
            - seminar_as_examiner
            - defense_as_examiner
            - academic_year_start
            - academic_year_end
            - registration_period
            - meeting
            - holiday
            - announcement
          description: Event type
          example: "guidance_scheduled"
        startDate:
          type: string
          format: date-time
          description: Event start date/time
          example: "2025-11-10T10:00:00.000Z"
        endDate:
          type: string
          format: date-time
          description: Event end date/time
          example: "2025-11-10T11:00:00.000Z"
        description:
          type: string
          description: Event description
          example: "Pembahasan BAB 1 dan 2"
        location:
          type: string
          description: Event location
          example: "Ruang Dosen 301"
        meetingLink:
          type: string
          format: uri
          description: Online meeting link
          example: "https://meet.google.com/abc-defg-hij"
        participants:
          type: array
          items:
            type: object
            properties:
              userId:
                type: string
                example: "user-123"
              name:
                type: string
                example: "Dr. John Doe"
              role:
                type: string
                enum: [student, lecturer, admin]
                example: "lecturer"
        status:
          type: string
          enum: [requested, accepted, rejected]
          description: Event status
          example: "requested"
        color:
          type: string
          description: Event color in hex format
          example: "#3b82f6"
